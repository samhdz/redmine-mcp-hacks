# Redmine MCP Server

ä¸€å€‹ä½¿ç”¨ [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) èˆ‡ Redmine ç³»çµ±æ•´åˆçš„ä¼ºæœå™¨ï¼Œè®“ Claude Code èƒ½å¤ ç›´æ¥æ“ä½œ Redmine å°ˆæ¡ˆç®¡ç†ç³»çµ±ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹è‰²

### âœ… è­°é¡Œç®¡ç†
- **æŸ¥è©¢è­°é¡Œ**: å–å¾—è­°é¡Œè©³ç´°è³‡è¨Šå’Œåˆ—è¡¨
- **å»ºç«‹è­°é¡Œ**: å»ºç«‹æ–°çš„è­°é¡Œä¸¦è¨­å®šç›¸é—œå±¬æ€§
- **æ›´æ–°è­°é¡Œ**: ä¿®æ”¹è­°é¡Œå…§å®¹ã€ç‹€æ…‹ã€å„ªå…ˆç´šç­‰
- **æŒ‡æ´¾è­°é¡Œ**: æŒ‡æ´¾æˆ–å–æ¶ˆæŒ‡æ´¾è­°é¡Œçµ¦ç‰¹å®šç”¨æˆ¶
- **æ–°å¢å‚™è¨»**: ç‚ºè­°é¡Œæ–°å¢å…¬é–‹æˆ–ç§æœ‰å‚™è¨»
- **é—œé–‰è­°é¡Œ**: è‡ªå‹•è¨­å®šè­°é¡Œç‚ºå·²å®Œæˆç‹€æ…‹

### âœ… å°ˆæ¡ˆç®¡ç†
- **å°ˆæ¡ˆåˆ—è¡¨**: å–å¾—å¯å­˜å–çš„å°ˆæ¡ˆæ¸…å–®
- **å°ˆæ¡ˆè­°é¡Œ**: ä¾ç‹€æ…‹ç¯©é¸ä¸¦åˆ—å‡ºå°ˆæ¡ˆä¸­çš„æ‰€æœ‰è­°é¡Œ

### âœ… æœå°‹åŠŸèƒ½
- **é—œéµå­—æœå°‹**: åœ¨è­°é¡Œæ¨™é¡Œå’Œæè¿°ä¸­æœå°‹é—œéµå­—
- **æˆ‘çš„è­°é¡Œ**: å¿«é€ŸæŸ¥çœ‹æŒ‡æ´¾çµ¦ç•¶å‰ç”¨æˆ¶çš„è­°é¡Œ

### âœ… ç³»çµ±å·¥å…·
- **å¥åº·æª¢æŸ¥**: ç¢ºèª MCP æœå‹™å™¨å’Œ Redmine é€£ç·šç‹€æ…‹
- **ç‹€æ…‹æŸ¥è©¢**: å–å¾—å¯ç”¨çš„è­°é¡Œç‹€æ…‹åˆ—è¡¨

## ğŸ“‹ ç³»çµ±éœ€æ±‚

- **Python**: 3.12 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Redmine**: æ”¯æ´ REST API çš„ç‰ˆæœ¬ï¼ˆå»ºè­° 4.0+ï¼‰
- **å¥—ä»¶ç®¡ç†å™¨**: [uv](https://docs.astral.sh/uv/) æˆ– pip

## ğŸ”§ å®‰è£è¨­å®š

### 1. å…‹éš†å°ˆæ¡ˆ

```bash
git clone <repository-url>
cd redmine-mcp
```

### 2. å®‰è£ä¾è³´

ä½¿ç”¨ uvï¼ˆæ¨è–¦ï¼‰ï¼š
```bash
uv sync
```

æˆ–ä½¿ç”¨ pipï¼š
```bash
pip install -e .
```

### 3. ç’°å¢ƒè¨­å®š

å»ºç«‹ `.env` æª”æ¡ˆï¼š
```bash
cp .env.example .env
```

ç·¨è¼¯ `.env` æª”æ¡ˆï¼Œè¨­å®šä»¥ä¸‹ç’°å¢ƒè®Šæ•¸ï¼š
```env
REDMINE_DOMAIN=https://your-redmine-domain.com
REDMINE_API_KEY=your_api_key_here
REDMINE_TIMEOUT=30
DEBUG_MODE=false
```

### 4. å–å¾— Redmine API é‡‘é‘°

1. ç™»å…¥æ‚¨çš„ Redmine ç³»çµ±
2. å‰å¾€ **æˆ‘çš„å¸³è™Ÿ** â†’ **API å­˜å–é‡‘é‘°**
3. é»æ“Š **é¡¯ç¤º** æˆ– **é‡è¨­** ä¾†å–å¾— API é‡‘é‘°
4. å°‡é‡‘é‘°è¤‡è£½åˆ° `.env` æª”æ¡ˆä¸­çš„ `REDMINE_API_KEY`

## ğŸ”— Claude Code æ•´åˆ

### å®‰è£åˆ° Claude Code

```bash
# å¾æœ¬åœ°å®‰è£
uv tool install .

# æˆ–ä½¿ç”¨ pip
pip install .

# æ–°å¢åˆ° Claude Code MCP é…ç½®
claude mcp add redmine "redmine-mcp" \
  -e REDMINE_DOMAIN="https://your-redmine-domain.com" \
  -e REDMINE_API_KEY="your_api_key_here"
```

### é©—è­‰å®‰è£

```bash
# æ¸¬è©¦ MCP æœå‹™å™¨
uv run python -m redmine_mcp.server

# æ¸¬è©¦ Claude Code æ•´åˆ
uv run python test_claude_integration.py
```

## ğŸ› ï¸ å¯ç”¨çš„ MCP å·¥å…·

### åŸºæœ¬å·¥å…·
| å·¥å…·åç¨± | åŠŸèƒ½æè¿° |
|---------|---------|
| `server_info` | é¡¯ç¤ºæœå‹™å™¨è³‡è¨Šå’Œé…ç½®ç‹€æ…‹ |
| `health_check` | æª¢æŸ¥æœå‹™å™¨å’Œ Redmine é€£ç·šå¥åº·ç‹€æ…‹ |

### è­°é¡Œæ“ä½œ
| å·¥å…·åç¨± | åŠŸèƒ½æè¿° |
|---------|---------|
| `get_issue` | å–å¾—æŒ‡å®šè­°é¡Œçš„è©³ç´°è³‡è¨Š |
| `create_new_issue` | å»ºç«‹æ–°çš„è­°é¡Œ |
| `update_issue_status` | æ›´æ–°è­°é¡Œç‹€æ…‹ |
| `update_issue_content` | æ›´æ–°è­°é¡Œå…§å®¹ï¼ˆæ¨™é¡Œã€æè¿°ç­‰ï¼‰ |
| `add_issue_note` | ç‚ºè­°é¡Œæ–°å¢å‚™è¨» |
| `assign_issue` | æŒ‡æ´¾æˆ–å–æ¶ˆæŒ‡æ´¾è­°é¡Œ |
| `close_issue` | é—œé–‰è­°é¡Œä¸¦è¨­å®šå®Œæˆåº¦ |

### æŸ¥è©¢å·¥å…·
| å·¥å…·åç¨± | åŠŸèƒ½æè¿° |
|---------|---------|
| `list_project_issues` | åˆ—å‡ºå°ˆæ¡ˆä¸­çš„è­°é¡Œ |
| `get_my_issues` | å–å¾—æŒ‡æ´¾çµ¦æˆ‘çš„è­°é¡Œåˆ—è¡¨ |
| `search_issues` | æœå°‹åŒ…å«é—œéµå­—çš„è­°é¡Œ |
| `get_projects` | å–å¾—å¯å­˜å–çš„å°ˆæ¡ˆåˆ—è¡¨ |
| `get_issue_statuses` | å–å¾—æ‰€æœ‰å¯ç”¨çš„è­°é¡Œç‹€æ…‹ |

## ğŸ’¡ ä½¿ç”¨ç¯„ä¾‹

### åœ¨ Claude Code ä¸­ä½¿ç”¨

```
# æŸ¥çœ‹æœå‹™å™¨ç‹€æ…‹
è«‹åŸ·è¡Œå¥åº·æª¢æŸ¥

# å–å¾—å°ˆæ¡ˆåˆ—è¡¨
é¡¯ç¤ºæ‰€æœ‰å¯å­˜å–çš„å°ˆæ¡ˆ

# æŸ¥çœ‹ç‰¹å®šè­°é¡Œ
å–å¾—è­°é¡Œ #123 çš„è©³ç´°è³‡è¨Š

# å»ºç«‹æ–°è­°é¡Œ
åœ¨å°ˆæ¡ˆ ID 1 ä¸­å»ºç«‹è­°é¡Œï¼š
- æ¨™é¡Œï¼šä¿®å¾©ç™»å…¥éŒ¯èª¤
- æè¿°ï¼šç”¨æˆ¶ç„¡æ³•æ­£å¸¸ç™»å…¥ç³»çµ±
- å„ªå…ˆç´šï¼šé«˜

# æœå°‹è­°é¡Œ
æœå°‹åŒ…å«ã€Œç™»å…¥ã€é—œéµå­—çš„è­°é¡Œ

# æ›´æ–°è­°é¡Œç‹€æ…‹
å°‡è­°é¡Œ #123 ç‹€æ…‹æ›´æ–°ç‚ºã€Œé€²è¡Œä¸­ã€ï¼Œå‚™è¨»ã€Œé–‹å§‹è™•ç†æ­¤å•é¡Œã€
```

## ğŸ§ª æ¸¬è©¦

### åŸ·è¡Œæ¸¬è©¦å¥—ä»¶

```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
uv run python -m pytest

# åŸ·è¡Œ MCP æ•´åˆæ¸¬è©¦
uv run python test_mcp_integration.py

# åŸ·è¡Œ Claude Code æ•´åˆæ¸¬è©¦  
uv run python test_claude_integration.py
```

### Docker ç’°å¢ƒæ¸¬è©¦

å¦‚æœæ‚¨æƒ³åœ¨æœ¬åœ° Docker ç’°å¢ƒä¸­æ¸¬è©¦ï¼š

```bash
# å•Ÿå‹• Redmine æ¸¬è©¦ç’°å¢ƒ
docker-compose up -d

# å¿«é€Ÿå•Ÿå‹•å®Œæ•´æ¸¬è©¦ç’°å¢ƒ
./quick_start.sh
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

**1. API èªè­‰å¤±æ•— (401/403 éŒ¯èª¤)**
- ç¢ºèª API é‡‘é‘°æ˜¯å¦æ­£ç¢º
- æª¢æŸ¥ Redmine æ˜¯å¦å•Ÿç”¨ REST API
- ç¢ºèªç”¨æˆ¶æ¬Šé™æ˜¯å¦è¶³å¤ 

**2. é€£ç·šé€¾æ™‚**
- æª¢æŸ¥ç¶²è·¯é€£ç·š
- èª¿æ•´ `REDMINE_TIMEOUT` ç’°å¢ƒè®Šæ•¸
- ç¢ºèª Redmine æœå‹™å™¨ç‹€æ…‹

**3. è­°é¡Œå»ºç«‹å¤±æ•—**
- ç¢ºèªå°ˆæ¡ˆæ˜¯å¦å­˜åœ¨ä¸”æœ‰æ¬Šé™
- æª¢æŸ¥å¿…è¦æ¬„ä½æ˜¯å¦å·²å¡«å¯«
- ç¢ºèªè¿½è¹¤å™¨å’Œç‹€æ…‹è¨­å®š

### é™¤éŒ¯æ¨¡å¼

å•Ÿç”¨é™¤éŒ¯æ¨¡å¼ä»¥å–å¾—æ›´è©³ç´°çš„éŒ¯èª¤è³‡è¨Šï¼š

```env
DEBUG_MODE=true
```

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
redmine-mcp/
â”œâ”€â”€ src/redmine_mcp/          # ä¸»è¦åŸå§‹ç¢¼
â”‚   â”œâ”€â”€ __init__.py           # å¥—ä»¶åˆå§‹åŒ–
â”‚   â”œâ”€â”€ server.py             # MCP æœå‹™å™¨ä¸»ç¨‹å¼
â”‚   â”œâ”€â”€ redmine_client.py     # Redmine API å®¢æˆ¶ç«¯
â”‚   â”œâ”€â”€ config.py             # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ validators.py         # è³‡æ–™é©—è­‰
â”œâ”€â”€ tests/                    # æ¸¬è©¦æª”æ¡ˆ
â”œâ”€â”€ docs/                     # æ–‡ä»¶ç›®éŒ„
â”œâ”€â”€ docker-compose.yml        # Docker æ¸¬è©¦ç’°å¢ƒ
â”œâ”€â”€ pyproject.toml            # å°ˆæ¡ˆé…ç½®
â””â”€â”€ README.md                 # å°ˆæ¡ˆèªªæ˜
```

## ğŸ¤ è²¢ç»æŒ‡å—

1. Fork æ­¤å°ˆæ¡ˆ
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤è®Šæ›´ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. é–‹å•Ÿ Pull Request

## ğŸ“„ æˆæ¬Šæ¢æ¬¾

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ - è©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆã€‚

## ğŸ”— ç›¸é—œé€£çµ

- [Model Context Protocol](https://modelcontextprotocol.io/)
- [Claude Code](https://claude.ai/code)
- [Redmine](https://www.redmine.org/)
- [FastMCP](https://github.com/jlowin/fastmcp)

---

å¦‚æœ‰ä»»ä½•å•é¡Œæˆ–å»ºè­°ï¼Œæ­¡è¿é–‹å•Ÿ Issue æˆ–è¯çµ¡å°ˆæ¡ˆç¶­è­·è€…ã€‚